## 1. 类图

<img src='../../img/AbstractFactory1.jpeg' />

- 每件产品明确声明接口，如桌子、椅子、沙发。所以产品变体都继承这些接口。

- 同一个对象的所有变体放在同一个类层次结构中。

<img src='../../img/AbstractFactory2.jpeg' />

- 声明抽象工厂，每个工厂对应一种变体（现代、复古），每个工厂都包含创建所有产品的接口（生产椅子、生产桌子、生产凳子）
- 这些create接口返回的是抽象产品类型
- 客户端不需要知道工厂类型，即不需要知道变体，只需要调用抽象接口，如sitOn。
- 工厂返回的椅子变体总是和同一工厂对象创建的沙发、凳子等属于同一个变体（现代风、复古风）
- 选择工厂类别（变体类别、家具风格）的代码，即创建具体工厂对象的代码，是应用程序根据配置文件初始化的。



## 2. 适用场景

- 无法预知对象确切类别和依赖关系。
  - 工厂方法分离创建和使用，如果要添加新产品，只需要创建新子类，而不需要知道其他代码
- 希望用户能扩展软件库或框架的内部组件。
  - 我们扩展开源UI框架，希望支持RoundButton
  - 先编写RoundButton子类继承Button，渲染圆形按钮
  - 再编写UIWithRoundButtons子类基础UIFrame，重写其createButton方法使之创建RoundButton，即可在客户端使用该子类创建带圆形按钮的UI了
- 希望复用已有对象，而不是每次都创建新对象
  - 包含的逻辑有：创建存储已有对象的空间，客户端请求对象时从空间中找，并返回客户端，找不到则创建新对象并添加到空间中
  - 这些代码可以放在ctor中，但定义上ctor只返回新对象
  - 因此可以用工厂方法，让它负责即可以重用对象、又可以创建新对象
